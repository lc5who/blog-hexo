---
title: Mysql索引原理
date: 2022-03-04 10:57:53
tags: mysql
type: Mysql
---
# 索引
## 索引的底层数据
索引采用B+树的数据结构.
* B+树中只有叶子节点会带有指向记录的指针（ROWID），而B树则所有节点都带有，在内部节点出现的索引项不会再出现在叶子节点中。
* B+树中所有叶子节点都是通过指针连接在一起，而B树不会。
## 组合索引的最左前缀说明
查询中必须使用 组合索引包含的第一个字段，且 where语句中第一个查询条件必须使用第一个字段  即最左边的字段
 例如组合索引（a,b,c），组合索引的生效原则是
从前往后依次使用生效，如果中间某个索引没有使用，那么断点前面的索引部分起作用，断点后面的索引没有起作用；
即： a,b,c,d组合索引，其实生成了4个索引，a,ab,abc  abcd 中间断了 如where ab=xx and d=xx 则走的是ab这个索引
## 索引不生效的几种情况
1. 索引列参与计算，不走索引！
2. 索引列使用了函数，不走索引！
3. 索引列使用了Like %XXX，不走索引！
4. 隐式转换——字符串列与数字直接比较，不走索引！
5. 尽量避免 OR 操作，只要有一个字段没有索引，改语句就不走索引，不走索引！
6. where id !=2 或者 where id <> 2，不走索引！
7. is null，is not null也无法使用索引，不走索引！
8. 组合索引未遵循最左前缀不走索引
